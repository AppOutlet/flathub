id: io.github.appoutlet.DisCorkie
runtime: org.freedesktop.Platform
runtime-version: '24.08'
sdk: org.freedesktop.Sdk
command: DisCorkie
finish-args:
  - --device=all
  - --socket=fallback-x11
  - --socket=wayland
  - --share=ipc
  - --share=network
  - --filesystem=xdg-run/gvfsd

modules:
  - name: DisCorkie
    buildsystem: simple
    build-commands:
      - unzip DisCorkie.zip
      - cp -r DisCorkie $FLATPAK_DEST
      - mkdir -p $FLATPAK_DEST/share/icons/hicolor/512x512/apps
      - cp DisCorkie/lib/DisCorkie.png $FLATPAK_DEST/share/icons/hicolor/512x512/apps/$FLATPAK_ID.png
      - install -Dm644 io.github.appoutlet.DisCorkie.metainfo.xml -t $FLATPAK_DEST/share/metainfo
      - install -Dm644 io.github.appoutlet.DisCorkie.desktop -t $FLATPAK_DEST/share/applications
      - install -Dm755 DisCorkie.sh $FLATPAK_DEST/bin/DisCorkie
    sources:
      - type: file
        dest-filename: DisCorkie.zip
        url: https://github.com/AppOutlet/GetDisCorkie/releases/download/1.0.10/DisCorkie-linux-1.0.10.zip
        sha256: ae1b26f887f3cb050515e46166f77b149b041cdc7300403e0f9ba96a320fa63b
      - type: file
        path: io.github.appoutlet.DisCorkie.metainfo.xml
      - type: file
        path: io.github.appoutlet.DisCorkie.desktop
      - type: file
        path: DisCorkie.sh